<ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-scale-multiple">
<p style="font-size: 20px; color: white">Procesando informaci칩n, por favor no cierre la ventana.</p>
</ngx-spinner>
<br>
<h1 class="title-custom">Configuraci칩n de plataforma</h1>
<hr class="mt-0">
<ng-container >
<form [formGroup]="formMACRO" >
    <div class="panel panel-default panel-custom">
        <div class="panel-heading">Datos</div>
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group">
                        <label for=""><span class="span_required">*</span> Mensaje de bienvenida a la plataforma</label>
                        <div style="border: 1px solid rgb(217, 217, 217) !important;">
                            <ckeditor [editor]="editor" [config]="configEditor" [(ngModel)]="form.contenido" 
                            formControlName="Mensaje"
                            (ready)="onReady($event)" (change)="onChange($event)" [disabled]="isDisabled"></ckeditor>
                        </div>
                        <div *ngIf="esInvalidoContenido" class="has-error">
                            <div class="ant-form-explain">
                            Debe ingresar el mensaje de bienvenida.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for=""><span class="span_required">*</span> Indicar que tipo de archivo de bienvenida:</label>
                        <div>
                            <nz-select nzAllowClear nzShowSearch nzPlaceHolder="--Seleccionar--"
                            [(ngModel)]="form.tipo_file"
                            (ngModelChange)="set_tipo_file_permitidos()"
                            formControlName="TipoArchivo">
                                <ng-container *ngFor="let item of array_tipo_file">
                                    <nz-option [nzValue]="item.id_enumerado" [nzLabel]="item.nombre"></nz-option>
                                </ng-container>
                            </nz-select>
                            <div *ngIf="error_tipo_file" class="has-error">
                                <div class="ant-form-explain">
                                Debe seleccionar el tipo de archivo.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group"[hidden]="!imagen_only">
                        <label for=""><span class="span_required">*</span> Adjuntar imagen de bienvenida de plataforma:</label>
                        <div>
                            <app-file-uploader-custom #imagenfileDocumentoUploader 
                            [fileInfo]="true"  
                            [id]="form.imagen" 
                            [(Files)]="_imagen_archivo" 
                            [(Uploading)]="estaGuardando"
                            [pesoMaximoEnMB]="pesoMaximoEnMB" 
                            [esBorrador]="false" 
                            (FileChange)="set_imagen_iden($event)"
                            (onRemovedIdFile)="handleRemovedFile($event,'imagen')"
                            [extensionAceptados]="imagen_extensionAceptados" 
                            [view_width]="600"
                            [puedeVerArchivo]="true"
                            [url]="url" 
                            [loading]="estaGuardando">
                            </app-file-uploader-custom>
                            <div *ngIf="error_imagen" class="has-error">
                                <div class="ant-form-explain">
                                Debe adjuntar una imagen.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for=""><span class="span_required">*</span> Adjuntar audio de fondo de plataforma (*.mp3):</label>
                        <div>
                            <app-audio-uploader-custom #audioDocumentoUploader 
                            [fileInfo]="true" 
                            [id]="form.audio" 
                            [(Files)]="audio_archivo" 
                            [(Uploading)]="audio_estaGuardando"
                            (FileChange)="set_audio_iden($event)"
                            [pesoMaximoEnMB]="pesoMaximoEnMB" 
                            (onRemovedIdFile)="handleRemovedFile($event,'audio')"
                            [esBorrador]="false" 
                            [puedeVerArchivo]="true"
                                    [url]="url" 
                                    [loading]="audio_estaGuardando">
                            </app-audio-uploader-custom>
                            <div *ngIf="error_audio" class="has-error">
                                <div class="ant-form-explain">
                                Debe adjuntar un audio.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6" [hidden]="!video_only">
                    <div class="form-group">
                        <label for=""><span class="span_required">*</span> Url de video de explicaci칩n de la plataforma:</label>
                        <div>
                            <input type="text" formControlName="URL" class="form-control" 
                            (ngModelChange)="this.error_url=false;"
                            placeholder="--https://www.youtube.com/watch?v=FM7MFYoylVs--" 
                            [(ngModel)]="form.url">
                        </div>
                        <div *ngIf="error_url" class="has-error">
                            <div class="ant-form-explain">
                            Debe ingresar un url v치lido.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel-footer text-center">
            <button type="button" class="btn btn-default-custom" (click)="cancelar()"><i class="fa fa-eraser"
                aria-hidden="true"></i> Cancelar</button>
            &nbsp;&nbsp;
            <button type="button" class="btn btn-primary-custom" (click)="save_update()"><i class="fa fa-save"></i> Guardar</button>
        </div>
    </div>
    
</form>
</ng-container>
