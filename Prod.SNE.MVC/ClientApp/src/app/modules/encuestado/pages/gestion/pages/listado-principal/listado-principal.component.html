<div class="_container" *ngIf="show_actual_list">
    <div class="row">
        <div class="col-sm-1" align="center">
            <div style="margin-top: 145px">
                <span class="btn_hoverable carrusel_icon" [hidden]="index_carrusel==0?true:false" (click)="prev()" >
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </span>
            </div>
        </div>
        <div class="col-sm-10">
            <div style="width: 100%;">
                <nz-carousel nzAutoPlay [nzAutoPlaySpeed]="10000" style="height: 400px;">
                    <div nz-carousel-content *ngFor="let _div of array_paged_front;let idx of index">
                        <div class="row">
                            <div class="col-sm-4" *ngFor="let item of _div.data; let _idx of index" style="height: 390px;">
                                <div class="card" >
                                    <div class="card-body" 
                                    (mouseenter) ="this.array_hover_control[item.id_encuesta_str]=true;" 
                                    (mouseleave) ="this.array_hover_control[item.id_encuesta_str]=false;"
                                    style="min-height:300px; max-height:300px;
                                    border: 1px solid rgba(0,0,0,.125);padding: 0px;">
                                        <div *ngIf="!array_hover_control[item.id_encuesta_str]">
                                            <div style="padding:20px">
                                                <span class="text_red">
                                                    Vigencia:<br>
                                                    Inicio:&nbsp;{{item.fecha_inicio | date:'dd/MM/yyyy hh:mm a'}}<br>
                                                    Fin:&nbsp;&nbsp;&nbsp;{{item.fecha_fin | date:'dd/MM/yyyy hh:mm a'}}
                                                </span>
                                                <br><br><br>
                                                <h3 align="center">{{item.titulo}}</h3>
                                                <p align="right" style="font-size: 12px;margin-top:10px" *ngIf="item.es_anonima"><strong>Esta encuesta es an√≥nima</strong></p>
                                                <p align="right" style="font-size: 12px;margin-top:10px">{{item.mensaje_corto_presentacion}}</p>
                                            </div>
                                        </div>
                                        <div *ngIf="array_hover_control[item.id_encuesta_str]" align="center">
                                            <img *ngIf="item.has_imagen && item.loaded" [src]="item.b64_img_presentacion" width="100%" height="100%">
                                            <img *ngIf="!item.has_imagen && item.loaded" src="../../../../../../../assets/images/Imagen_no_disponible.png" width="95%">
                                        </div>
                                    </div>
                                    <div class="card-footer" style="border: 1px solid rgba(0,0,0,.125)" 
                                    *ngIf="!item.resuelto && item.fecha_fin_date>today && item.id_estado_resuelto==_ESTADO_COMPLETADO.por_completar"
                                    align="center">
                                        <div class="btn_hoverable" style="width:200px;height:45px"
                                            (click)="verParaLLenado(item)">
                                            <div class="w3-light-red w3-round-xlarge" align="left" >
                                                <div class="w3-container w3-green w3-round-xlarge" 
                                                [ngStyle]="{'width': item.porcentaje_avance+'%'}">&nbsp;</div>
                                            </div>
                                            <div class="text_completar">Completar</div>
                                        </div>                                     
                                    </div>
                                    <div class="card-footer" style="border: 1px solid rgba(0,0,0,.125)"
                                    align="center" *ngIf="!item.resuelto && item.fecha_fin_date>today && item.id_estado_resuelto!=_ESTADO_COMPLETADO.por_completar" >
                                        <button (click)="verParaLLenado(item)" 
                                        type="button" class="btn btn-primary-custom btn_footer_card_carrusel" >
                                            Iniciar
                                        </button>
                                    </div>
                                    <div class="card-footer" style="border: 1px solid rgba(0,0,0,.125)"
                                    align="center" *ngIf="!item.resuelto && today>=item.fecha_fin_date" >
                                        <button 
                                        type="button" class="btn btn-default-custom btn_footer_card_carrusel" >
                                            Sin llenar
                                        </button>
                                    </div>
                                    <div class="card-footer" style="border: 1px solid rgba(0,0,0,.125)"
                                    align="center" *ngIf="item.resuelto"  >
                                    <button 
                                        type="button" class="btn btn-default-custom btn_footer_card_carrusel" >
                                            Finalizado
                                        </button>
                                    </div>

                                    
                                        
                                    


                                </div>
                            </div>
                        </div>
                    </div>
                </nz-carousel>
                <span class="btn_hoverable" (click)="goListadoTodosEncuestas()" style="color:#dc3545">Ver todas las encuestas</span>
            </div>
        </div>
        <div class="col-sm-1" align="center">
            <div style="margin-top: 145px">
                <span class="btn_hoverable carrusel_icon" [hidden]="(total_pages>0 && index_carrusel==total_pages-1)?true:false" (click)="next()">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </span>
            </div>
        </div>
    </div>
</div>

<ng-container *ngIf="verItemParaLLenado">
    <app-vista-encuesta *ngIf="verItemParaLLenado"
    (onGoInicio)="handleGoInicio($event)"
    [main_data]="encuesta_main_data"
    [welcome_data]="encuesta_welcome_data"
    [indicaciones]="indicaciones"
    [agradecimiento_data]="encuesta_agradecimiento_data"></app-vista-encuesta>
</ng-container>
<ng-container *ngIf="verListadoTodos">
    <app-listado-todos-por-usuario *ngIf="verListadoTodos"
    (onGoListadoPrincipal)="handleGoListadoPrincipal($event)">
    </app-listado-todos-por-usuario>
</ng-container>